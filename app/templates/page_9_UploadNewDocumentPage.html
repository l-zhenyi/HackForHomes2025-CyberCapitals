{% extends 'base.html' %}
{% block title %}Upload New Document{% endblock %}
{% block content %}

<h1 class="title-purple-text text-center mt-5">Upload a new Document</h1>

<div class="container mt-5 member-timetable-page shadow">
    <form class="file-upload" action="{{ url_for('main.upload_document') }}" method="POST" enctype="multipart/form-data">
        <!-- Manual CSRF token, just like in your appointments form -->
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <!-- Choose File -->
        <div class="d-flex flex-column align-items-center mt-3 mb-5">
            <h4 class="mb-3 upload-title"><strong>Choose File</strong></h4>
            <div class="input-group shadow-sm w-75">
                <input type="file" class="form-control" name="upload_document" id="fileUpload" required>
            </div>
        </div>

        <!-- Document Name -->
        <div class="row mb-3">
            <h4 class="mb-2 upload-title"><strong>Document Name</strong></h4>
            <div class="input-group shadow-sm w-75">
                <input type="text" class="form-control form-control-sm" name="document_name"
                        placeholder="Enter a name for your document" required>
            </div>
        </div>
        
        <!-- Upload Date -->
        <div class="row mb-3">    
            <h4 class="mb-2 upload-title"><strong>Date Uploaded</strong></h4>
            <div class="input-group shadow-sm w-75">
                <input type="date" class="form-control form-control-sm" name="upload_date" required>
            </div>        
        </div>

        <!-- Document Type -->
        <div class="row mb-3">
            <h4 class="upload-title"><strong>Document Type</strong></h4>
            <select class="form-select shadow-sm w-75" name="document_type" required>
                <option value="" disabled selected style="opacity: 0.6;">Select an option</option>
                <option value="identity">Identity Document</option>
                <option value="income_proof">Proof of Income</option>
                <option value="other">Other</option>
            </select>
        </div>
        
        <!-- Document Notes -->
        <div class="row mb-5">
            <h4 class="mb-2 upload-title"><strong>Notes (Optional)</strong></h4>
            <div class="input-group shadow-sm w-75">
                <textarea class="form-control form-control-sm" name="document_notes" rows="4"
                          placeholder="Enter a short note or comment about the document (optional)"></textarea>
            </div>
        </div>

        <!-- Expiration Date -->
        <div class="row mb-5">
            <h4 class="upload-title practitioner"><strong>Expiration Date (Optional)</strong></h4>
            <div class="d-flex align-items-center mb-2">
                <input class="form-check-input me-2 custom-checkbox" type="checkbox" id="enableExpirationDate"
                        name="expiration_enabled"
                        onclick="document.getElementById('expirationDateField').disabled = !this.checked;">
                <label class="form-check-label upload-title mb-0 me-3" for="enableExpirationDate">
                    Enable
                </label>
                <input type="date" class="form-control form-control-sm shadow-sm w-75" id="expirationDateField"
                        name="expiration_date" placeholder="Select a date" disabled>
            </div>
        </div>

        <!-- Practitioner Type and Submit Button -->
        <div class="row mb-3">
            <button type="submit" class="btn btn-upload shadow-sm w-75">
                Upload Document
            </button>
        </div>
    </form>
</div>

<script>
    // Keep checkbox-based date logic here if needed
</script>

{% endblock %}
